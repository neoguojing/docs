
# faiss 介绍和原理
facebook开源：
  https://github.com/facebookresearch/faiss
- 向量k-NN搜索的计算库，其作用主要在保证高准确度的前提下大幅提升搜索速度
- 本质上是一个向量（矢量）数据库
- 主要流程包括train，add
- faiss 索引基本上是基于PQ或IVF
- faiss PQ均基于L2（欧式距离）
- 高效的k-means实现
- PCA降维算法


## 基本概念

Embedding嵌入：
 - 使得高维的原始数据被映射到低维流形之后变得可分
 - 低维流形的表征向量叫做Embedding
 - 原始数据提取出来的Feature
 - 神经网络映射之后的低维向量

线性变化：
- 不会改变原始数据的数值排序
- 把一个向量空间里的向量映射到了另一个向量空间里的另一个向量
- 操作：投影、伸缩、旋转

归一化：
 - 数据变换到一定的空间（0,1）或（-1,1）
 - 本质上是数据的线性变化
 - 提升模型的收敛速度，优化梯度下降，方便KNN算法，避免数值问题
 - 常用方法：Min-Max、平均值、对数等
 

相似度度量：
- 余弦consine ： 计算两个向量的夹角余弦值，值位于（-1,1）,越大则相似度越高
- 点积 ： 余弦的另外一种表达方式，方便计算
- 欧拉距离： 空间距离计算公式，值越小越相似

kNN：k-Nearest Neighboors k临近算法
- 解决分类问题
- 机器学习唯一无模型算法
- 将待分类样本，计算与其他样本的距离，排序，选出距离近的K个点，选出K个点中最多的分类，将数据归类

Product Quantizer，简称PQ，乘积量化，计算距离的方法
 - 将矢量编码或解码为代码
 - 优化距离计算的速度
 - 把连续的空间离散化
 
Inverted File System，简称IVF，基于kmeans
- 减少需要计算距离的目标向量个数
- 对库里所有向量做kmeans聚簇
- 向量转换为与簇心的残差


## 依赖

- MKL ： Intel数学核心函数库（MKL）是一套高度优化、线程安全的数学例程、函数，面向高性能的工程、科学与财务应用
- OpenBlas ： 基础线性代数子程序库 c++的numpy
- OpenMP ： 并行描述的高层抽象降低了并行编程的难度和复杂度，解决线程粒度和负载平衡，只适合共享内存，不支持集群


